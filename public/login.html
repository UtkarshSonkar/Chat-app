<!DOCTYPE html>
<html lang="en">
    <head>
     <meta charset="UTF-8"/>
     <meta name ="viewport" content="width=device-width, initial-scale=1.0"/>
     <title>Document</title>
    </head>

    <body>
        <h1>Login</h1>
       <form id="login">
           <input type="text" autocomplete="off" id="username" placeholder="Usernamme"/>
           <input type="password" autocomplete="off" id="password" placeholder="Password"/>
           <input type="submit" value="Submit form"/>
       </form>

       <script>
           const form= document.getElementById("login")
           form.addEventListener('submit', loginUser)

          async function loginUser(event){
               event.preventDefault()
               const username=document.getElementById('username')
               const password=document.getElementById('password')

               const result= await fetch('/api/login',{
                   method:"POST",
                   headers:{
                       "Content-Type":"application/json"
                   },

                   body:JSON.stringify({
                       username,
                       password     
                   })
               }).then((res)=>res.json())

               if(result.status ==="ok")
               {
                   //everything is fine
                   alert("got the token", result.data)
               }
               else{
                   alert(result.error)
               }
           }
       </script>



    </body>
</html>